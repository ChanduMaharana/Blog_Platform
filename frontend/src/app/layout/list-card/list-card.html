<div *ngFor="let item of items; trackBy: trackById" 
     class="bg-white rounded-lg border border-blue-100 p-3 sm:p-4 m-2 sm:m-4 shadow flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 min-h-[120px] sm:min-h-[100px]">
  
  <!-- Left: Avatar -->
  <div class="flex items-center gap-3 sm:gap-4 w-full sm:w-auto">
    <div class="flex-shrink-0">
      <div 
        [class]="'w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center font-semibold text-sm sm:text-base ' + getAvatarClass(item)"
      >
        {{ getTitlePrefix(item) }}
      </div>
    </div>

    <!-- Middle: title + subtitle + tags -->
    <div class="flex-1 sm:ml-2">
      <div class="font-semibold text-gray-800 text-base sm:text-lg line-clamp-1 sm:line-clamp-2">
        {{ item[titleKey] }}
      </div>
      <div class="text-xs sm:text-sm text-gray-500 mt-1 sm:mt-2 flex flex-wrap items-center gap-1 sm:gap-2">
        <span *ngIf="activeKey && item[activeKey]" 
              class="inline-block px-2 py-0.5 bg-black text-white rounded text-xs font-medium whitespace-nowrap">
          Active
        </span>
        <span *ngIf="orderKey" class="whitespace-nowrap">
          Order: {{ item[orderKey] }}
        </span>
        <span *ngIf="subtitleKey" class="truncate max-w-[200px]">
          {{ item[subtitleKey] }}
        </span>
      </div>
    </div>
  </div>

  <!-- Right: action buttons -->
  <div class="flex gap-2 self-end sm:self-auto mt-2 sm:mt-0">
    <button 
      (click)="onEdit(item)" 
      title="Edit" 
      class="p-1.5 sm:p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
    >
      <svg 
        xmlns="http://www.w3.org/2000/svg" 
        height="18px" 
        viewBox="0 -960 960 960" 
        width="18px" 
        class="sm:w-6 sm:h-6"
        fill="#5f6368"
      >
        <path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/>
      </svg>
    </button>
    <button 
      (click)="onDelete(item.id)" 
      title="Delete" 
      class="p-1.5 sm:p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"
    >
      <svg 
        xmlns="http://www.w3.org/2000/svg" 
        height="18px" 
        viewBox="0 -960 960 960" 
        width="18px" 
        class="sm:w-6 sm:h-6"
        fill="#fff"
      >
        <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
      </svg>
    </button>
  </div>
</div>