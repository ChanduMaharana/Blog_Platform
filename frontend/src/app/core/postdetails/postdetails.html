<div *ngIf="!loading; else loadingTemplate"
     class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">

  <button routerLink="/home"
    class="text-gray-500 cursor-pointer text-sm mb-6 inline-block hover:underline">
    ‚Üê Back to Posts
  </button>

  <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-4 text-gray-900 leading-tight">
    {{ post?.title }}
  </h1>

  <div class="flex flex-wrap items-center gap-2 sm:gap-4 mb-6">
    <span class="font-semibold text-gray-900 text-sm sm:text-base">
      {{ post?.author }}
    </span>
    <span class="text-gray-500 text-sm sm:text-base">
      {{ post?.date }}
    </span>
  </div>

  <!-- SHARE BUTTONS -->
  <div
    class="flex flex-wrap items-center gap-2 sm:gap-3 border-t border-b border-gray-300 py-3 sm:py-4 mb-8">
    <span class="text-gray-600 font-semibold text-sm sm:text-base">
      Share:
    </span>

    <button (click)="shareOnFacebook()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <lucide-icon name="facebook" class="w-4 h-4 text-blue-600"></lucide-icon>
      Facebook
    </button>

    <button (click)="shareOnTwitter()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <lucide-icon name="twitter" class="w-4 h-4 text-blue-400"></lucide-icon>
      Twitter
    </button>

    <button (click)="shareOnLinkedIn()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <lucide-icon name="linkedin" class="w-4 h-4 text-blue-700"></lucide-icon>
      LinkedIn
    </button>

    <button (click)="copyLink()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <lucide-icon name="link" class="w-4 h-4 text-gray-700"></lucide-icon>
      Copy Link
    </button>
  </div>

  <img
  *ngIf="post?.coverImage"
  [src]="post.coverImage"
  class="rounded-xl shadow w-full mb-6 object-cover h-48 sm:h-64 lg:h-80"
/>


  <!-- CONTENT -->
  <div class="prose prose-sm sm:prose-base lg:prose-lg max-w-none mb-10 text-gray-800">
    {{ post?.content || post?.description || 'Content not available.' }}
  </div>

  <!-- COMMENTS -->
  <div class="mb-10">
    <app-comment-section></app-comment-section>
  </div>

  <div *ngIf="relatedPosts.length" class="mt-10">
    <h2 class="text-lg sm:text-xl font-semibold mb-6">
      Related Posts
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

      <div
        *ngFor="let related of relatedPosts"
        (click)="viewPost(related.id)"
        class="cursor-pointer bg-white border border-blue-200 rounded-lg shadow hover:shadow-lg transition overflow-hidden">

        <div class="relative">
         <img
         [src]="related.coverImage || 'assets/default.jpg'"
         [alt]="related.title"
         class="w-full h-40 object-cover" />

          <span
            class="absolute top-2 left-2 px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">
            {{ related.category || 'News' }}
          </span>
        </div>

        <div class="p-4">
          <h3 class="font-semibold text-base text-gray-800 mb-2 leading-tight line-clamp-2">
            {{ related.title }}
          </h3>

          <p class="text-gray-600 text-xs mb-3 line-clamp-2">
            {{ related.description | slice: 0:80 }}...
          </p>

          <div class="border-b mb-3"></div>

          <div class="text-xs text-gray-500 flex justify-between">
            <span class="font-medium">{{ related.author }}</span>
            <span>{{ related.date }}</span>
          </div>
        </div>

      </div>

    </div>
  </div>

</div>

<!-- LOADING TEMPLATE -->
<ng-template #loadingTemplate>
  <div class="max-w-4xl mx-auto px-4 py-10">
    <div class="text-center text-gray-600 py-20">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
      <p class="text-base">Loading post...</p>
    </div>
  </div>
</ng-template>
