<div *ngIf="!loading; else loadingTemplate"
  class="max-w-7xl mx-auto px-4 py-6
         grid grid-cols-1 lg:grid-cols-[220px_1fr_220px] gap-6">

  <!-- <aside class="hidden lg:block">
  <div class="ad-box">
<app-free-ad
    scriptUrl="https://pl28679350.effectivegatecpm.com/35/cb/c9/35cbc91e348be76c3d59806e56e2a415.js">
  </app-free-ad>
  </div>
</aside> -->

<main class="min-w-0">
 <button (click)="goBack()"
    class="text-gray-500 cursor-pointer text-sm mb-6 inline-block hover:underline">
    ‚Üê Back to Posts
  </button>

  <article class="prose prose-sm sm:prose-base lg:prose-lg max-w-none select-text">

  <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-4 text-gray-900 leading-tight">
    {{ post?.title }}
  </h1>

  <div class="flex flex-wrap items-center gap-2 sm:gap-4 mb-6">
    <span class="font-semibold text-gray-900 text-sm sm:text-base">
      {{ post?.author }}
    </span>
    <span class="text-gray-500 text-sm sm:text-base">
      {{ post?.date }}
    </span>
  </div>

  <!-- SHARE BUTTONS -->
  <div
    class="flex flex-wrap items-center gap-2 sm:gap-3 border-t border-b border-gray-300 py-3 sm:py-4 mb-8">
    <span class="text-gray-600 font-semibold text-sm sm:text-base">
      Share:
    </span>

    <button (click)="shareOnFacebook()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
     <i class="fa-brands fa-facebook-f text-blue-600"></i>
      Facebook
    </button>

    <button (click)="shareOnTwitter()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <i class="fa-brands fa-twitter text-sky-400"></i>
      Twitter
    </button>

    <button (click)="shareOnLinkedIn()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <i class="fa-brands fa-linkedin text-blue-700"></i>
      LinkedIn
    </button>

    <button (click)="shareOnWhatsApp()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <i class="fa-brands fa-whatsapp text-green-600"></i>
      WhatsApp
    </button>

    <button (click)="copyLink()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <i class="fa-solid fa-link"></i> 
      Copy Link
    </button>
  </div>

  <img
  *ngIf="post?.coverImage"
  [src]="post.coverImage"
  class="w-full h-48 sm:h-64 lg:h-80 rounded-xl object-cover mb-6"
/>
<!-- MOBILE AD -->
<!-- <div class="ad-horizontal">
  <app-free-ad
    scriptUrl="https://pl28679350.effectivegatecpm.com/35/cb/c9/35cbc91e348be76c3d59806e56e2a415.js">
  </app-free-ad>
</div> -->


<div class="ad-horizontal">
 <app-free-ad
    adKey="a88dfd6feba69be6dc45f290686fbebe"
    [width]="728"
    [height]="90">
  </app-free-ad>
</div>


  <!-- CONTENT -->
<div
  class="prose prose-sm sm:prose-base lg:prose-lg max-w-none mb-10 text-gray-800"
  [innerHTML]="post.content | safeHtml">
</div>

</article>

  <!-- COMMENTS -->
  <div class="mt-10">
    <app-comment-section></app-comment-section>
  </div>

  <div *ngIf="relatedPosts.length" class="mt-12">
    <h2 class="text-lg sm:text-xl font-semibold mb-6">
      Related Posts
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

      <div
        *ngFor="let related of relatedPosts"
        (click)="viewPost(related.slug)"
        class="cursor-pointer bg-white border border-blue-200 rounded-lg shadow hover:shadow-lg transition overflow-hidden">

        <div class="relative">
         <img
         [src]="related.image || 'assets/default.jpg'"
         [alt]="related.title"
         class="w-full h-40 object-cover rounded-t-lg" />

          <span
            class="absolute top-2 left-2 px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">
            {{ related.category || 'News' }}
          </span>
        </div>

        <div class="p-4">
          <h3 class="font-semibold text-base text-gray-800 mb-2 leading-tight line-clamp-2">
            {{ related.title }}
          </h3>

          <p class="text-gray-600 text-xs mb-3 line-clamp-2">
            {{ related.description | slice: 0:80 }}...
          </p>

          <div class="border-b mb-3"></div>

          <div class="text-xs text-gray-500 flex justify-between">
            <span class="font-medium">{{ related.author }}</span>
            <span>{{ related.date }}</span>
          </div>
        </div>

      </div>

    </div>
  </div>
  </main>

<!-- <aside class="hidden lg:block">
  <div class="ad-box">
<app-free-ad
    scriptUrl="https://pl28679350.effectivegatecpm.com/35/cb/c9/35cbc91e348be76c3d59806e56e2a415.js">
  </app-free-ad>  </div>
</aside> -->


</div>

<!-- LOADING TEMPLATE -->
<ng-template #loadingTemplate>
  <div class="max-w-4xl mx-auto px-4 py-10">
    <div class="text-center text-gray-600 py-20">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
      <p class="text-base">Loading post...</p>
    </div>
  </div>
</ng-template>
<style>
.ad-box {
  min-height: 600px;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 2px dashed #9ca3af;
  background: #f3f4f6;
  border-radius: 8px;
  position: sticky;
  top: 100px;
}


.ad-horizontal {
  width: 100%;
  min-height: 90px;
  margin: 32px 0;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 2px dashed #9ca3af;
  border-radius: 8px;
  background: #f9fafb;
  position: relative;
}

.ad-horizontal::before {
  content: "Advertisement";
  font-size: 12px;
  color: #6b7280;
  position: absolute;
  top: -18px;
  left: 12px;
  background: #fff;
  padding: 0 6px;
}


.ad-box::before {
  content: "Advertisement";
  font-size: 12px;
  color: #6b7280;
}
.share-btn {
  padding: 6px 10px;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  font-size: 12px;
}


</style>