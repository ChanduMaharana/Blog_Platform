<div *ngIf="!loading; else loadingTemplate"
     class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">

 <button (click)="goBack()"
    class="text-gray-500 cursor-pointer text-sm mb-6 inline-block hover:underline">
    ‚Üê Back to Posts
  </button>

  <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-4 text-gray-900 leading-tight">
    {{ post?.title }}
  </h1>

  <div class="flex flex-wrap items-center gap-2 sm:gap-4 mb-6">
    <span class="font-semibold text-gray-900 text-sm sm:text-base">
      {{ post?.author }}
    </span>
    <span class="text-gray-500 text-sm sm:text-base">
      {{ post?.date }}
    </span>
  </div>

  <!-- SHARE BUTTONS -->
  <div
    class="flex flex-wrap items-center gap-2 sm:gap-3 border-t border-b border-gray-300 py-3 sm:py-4 mb-8">
    <span class="text-gray-600 font-semibold text-sm sm:text-base">
      Share:
    </span>

    <button (click)="shareOnFacebook()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
    <path style="text-indent:0;text-align:start;line-height:normal;text-transform:none;block-progression:tb;-inkscape-font-specification:Bitstream Vera Sans" d="M 7 5 C 5.9069372 5 5 5.9069372 5 7 L 5 25 C 5 26.093063 5.9069372 27 7 27 L 25 27 C 26.093063 27 27 26.093063 27 25 L 27 7 C 27 5.9069372 26.093063 5 25 5 L 7 5 z M 7 7 L 25 7 L 25 25 L 19.8125 25 L 19.8125 18.25 L 22.40625 18.25 L 22.78125 15.25 L 19.8125 15.25 L 19.8125 13.3125 C 19.8125 12.4385 20.02825 11.84375 21.28125 11.84375 L 22.90625 11.84375 L 22.90625 9.125 C 22.62925 9.088 21.6665 9.03125 20.5625 9.03125 C 18.2585 9.03125 16.6875 10.417 16.6875 13 L 16.6875 15.25 L 14.0625 15.25 L 14.0625 18.25 L 16.6875 18.25 L 16.6875 25 L 7 25 L 7 7 z" color="#000" overflow="visible" font-family="Bitstream Vera Sans"/>
    </svg>
      Facebook
    </button>

    <button (click)="shareOnTwitter()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <?xml version="1.0" ?><!DOCTYPE svg  PUBLIC '-//W3C//DTD SVG 1.1//EN'  'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" width="512px" height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path d="M392.599,13.5H119.401C61.007,13.5,13.5,61.007,13.5,119.401v273.198c0,58.394,47.507,105.901,105.901,105.901h273.198  c58.394,0,105.901-47.507,105.901-105.901V119.401C498.5,61.007,450.993,13.5,392.599,13.5z M473.5,392.599  c0,44.609-36.292,80.901-80.901,80.901H119.401c-44.609,0-80.901-36.292-80.901-80.901V119.401  c0-44.609,36.292-80.901,80.901-80.901h273.198c44.609,0,80.901,36.292,80.901,80.901V392.599z M290.426,233.067l94.35-117.595  c4.32-5.385,3.457-13.252-1.927-17.573c-5.385-4.319-13.252-3.458-17.573,1.928L274.4,213.092L183.524,99.827  c-2.373-2.957-5.959-4.678-9.75-4.678h-73.601c-4.808,0-9.19,2.758-11.27,7.093c-2.08,4.335-1.489,9.479,1.52,13.229l131.15,163.462  l-94.35,117.595c-4.32,5.385-3.457,13.252,1.927,17.573c2.308,1.851,5.07,2.75,7.815,2.75c3.66,0,7.289-1.601,9.758-4.678  L237.6,298.908l90.875,113.265c2.373,2.957,5.959,4.678,9.75,4.678h73.601c0.008,0,0.014,0,0.02,0c6.903,0,12.5-5.596,12.5-12.5  c0-3.187-1.192-6.094-3.155-8.302L290.426,233.067z M344.223,391.851L126.229,120.149h41.548l217.994,271.702H344.223z"/></svg>
      Twitter
    </button>

    <button (click)="shareOnLinkedIn()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
     <?xml version="1.0" ?><!DOCTYPE svg  PUBLIC '-//W3C//DTD SVG 1.1//EN'  'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'><svg enable-background="new 0 0 512 512" id="Layer_1" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M257.6,5c74,0,148,0,221.9,0C499,5,511,16.9,511,36.4c0,147.1,0,294.3,0,441.4c0,19.2-12,31.2-31.1,31.2   c-148.6,0-297.3,0-445.9,0c-18.8,0-31-12.1-31-30.9C3,330.7,3,183.2,3,35.8C3,17.3,15.2,5,33.6,5C108.3,5,182.9,5,257.6,5z M257,19   c-74,0-148,0-222,0c-12.3,0-18,5.7-18,18c0,146.7,0,293.3,0,440c0,12.3,5.7,18,18,18c148,0,296,0,444,0c12.3,0,18-5.7,18-18   c0-146.7,0-293.3,0-440c0-12.3-5.7-18-18-18C405,19,331,19,257,19z"/><path d="M200.2,430.8c0-76.8,0-152.9,0-229.5c23.3,0,46.5,0,70.1,0c0,9.1,0,18.3,0,28.7c4.1-4.9,7.4-9,10.9-13   c13-14.9,29.6-22.7,49-24.5c19.7-1.8,38.8,0.7,56.3,10.9c14.1,8.1,24.3,19.7,31.4,34.2c8.6,17.5,11.8,36.3,11.9,55.6   c0.2,44.2,0.1,88.3,0.1,132.5c0,1.5-0.1,3-0.2,4.9c-1.8,0.1-3.4,0.2-5,0.2c-20.2,0-40.3-0.1-60.5,0.1c-4.6,0.1-5.6-1.5-5.6-5.8   c0.1-40.5,0.2-81,0-121.5c0-7.4-1-15-2.7-22.2c-3-12.5-11.4-20.9-23.4-25.2c-12.3-4.4-25-5.3-36.9,0.6c-17.5,8.8-24.9,23.7-24.8,43   c0.2,40.8,0.1,81.7,0,122.5c0,10.2,0.1,8.2-8.3,8.3c-18.8,0.1-37.7,0-56.5,0C204.3,430.8,202.5,430.8,200.2,430.8z"/><path d="M155.5,430.8c-4.7,0-9,0-13.3,0c-17.2,0-34.3-0.1-51.5,0.1c-4.2,0.1-5.9-0.9-5.9-5.5c0.1-72.6,0.1-145.2,0.1-217.8   c0-3.1,0.2-5.4,4.4-5.4c20.8,0.1,41.6,0.1,62.5,0.1c1.1,0,2.3,0.3,3.7,0.5C155.5,278.6,155.5,354.3,155.5,430.8z"/><path d="M118.6,157c-21.1,0-35.9-15-35.8-36.3c0.1-20.8,15.3-35.7,36.6-35.6c21.8,0.1,36,14.8,36.2,36.1   C155.8,141.7,141.2,157.2,118.6,157z"/></g></svg>
      LinkedIn
    </button>

    <button (click)="shareOnWhatsApp()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
      <?xml version="1.0" ?><!DOCTYPE svg  PUBLIC '-//W3C//DTD SVG 1.1//EN'  'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'><svg enable-background="new 0 0 512 512" id="Layer_1" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M10.8,507.9c6.9-20.7,13.4-40.1,19.9-59.5c6.5-19.2,12.3-38.7,19.7-57.6c3.8-9.6,2.6-16.8-2.2-25.8   c-26.2-48.6-34-100.7-24.9-154.9c7.7-45.9,27.2-86.5,58.7-121C133.9,32.4,198.7,5.2,275.3,8.4c56.1,2.3,105.7,22.8,148,59.9   c39.4,34.5,65.1,77.4,77,128.4c9.6,41.1,8.5,82-3.3,122.5c-15,51.3-43.7,93.6-86.4,125.8c-59.3,44.8-125.8,58.7-198.3,44.6   c-21.8-4.2-42.6-12-62.2-22.6c-3.2-1.7-5.9-2.1-9.4-0.9c-37.2,12-74.5,23.9-111.7,35.8C23.4,503.7,17.7,505.6,10.8,507.9z    M74.1,445.2c2-0.5,2.9-0.7,3.8-1c23.3-7.4,46.6-14.9,70-22.1c2.2-0.7,5.2-0.1,7.3,0.9c10.1,5,19.8,11,30.2,15.4   c42.8,18.1,86.9,21,131.5,8.6c53.2-14.9,94-46.6,121.9-94.5c23.9-41,32.1-85.3,24.7-131.9c-9.4-59.3-39.8-105.9-90.1-139   C329.8,53,281.8,43.3,230.6,51.4c-44.1,7-81.8,27.1-112.9,59.3c-26.7,27.6-44.6,60.2-52.4,97.7c-11.1,53.7-2.9,104.5,26.9,150.8   c6,9.3,5.8,16.4,2.2,25.9C87.1,404.6,81,424.5,74.1,445.2z"/><path d="M389.3,321.8c-0.3,19.3-9.4,34-27.8,43.2c-18.1,9-36.5,11.3-55.4,3.9c-17-6.7-34.2-13.2-50.6-21.3   c-21.6-10.7-39.3-26.7-55.5-44.4c-17.9-19.6-33.1-41.4-45.6-64.7c-8.9-16.5-14.3-34-12.4-53.2c2-20.4,11.5-36.7,27.5-49   c3.2-2.4,8-3.5,12.1-3.9c5.3-0.4,10.6,0.4,15.9,0.8c4.4,0.4,6.8,3.5,8.3,7.1c3.9,9.6,7.4,19.2,11.1,28.9c2.5,6.5,4.4,13.3,7.4,19.6   c3.7,7.8,1.4,14.3-3.4,20.3c-4.1,5.1-8.4,10-13.1,14.4c-3.9,3.7-4.6,7.5-2,12c11.5,20.5,25.5,38.9,44,53.8   c12.2,9.8,25.7,17.1,39.7,23.9c4.1,2,8.1,1.7,11.3-2c6.9-7.9,13.9-15.7,20.7-23.7c4.4-5.1,6.6-6.1,12.5-3.1   c17.1,8.6,34,17.5,51,26.4C389,313,390,316.6,389.3,321.8z"/></g></svg>
      WhatsApp
    </button>

    <button (click)="copyLink()"
      class="flex items-center gap-2 px-3 py-2 border border-gray-200 text-gray-800 font-semibold rounded text-xs sm:text-sm hover:bg-gray-100 transition">
     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
     <path d="M8,7 L8,8 L6.5,8 C5.67157288,8 5,8.67157288 5,9.5 L5,18.5 C5,19.3284271 5.67157288,20 6.5,20 L13.5,20 C14.3284271,20 15,19.3284271 15,18.5 L15,17 L16,17 L16,18.5 C16,19.8807119 14.8807119,21 13.5,21 L6.5,21 C5.11928813,21 4,19.8807119 4,18.5 L4,9.5 C4,8.11928813 5.11928813,7 6.5,7 L8,7 Z M16,4 L10.5,4 C9.67157288,4 9,4.67157288 9,5.5 L9,14.5 C9,15.3284271 9.67157288,16 10.5,16 L17.5,16 C18.3284271,16 19,15.3284271 19,14.5 L19,7 L16.5,7 C16.2238576,7 16,6.77614237 16,6.5 L16,4 Z M20,6.52797748 L20,14.5 C20,15.8807119 18.8807119,17 17.5,17 L10.5,17 C9.11928813,17 8,15.8807119 8,14.5 L8,5.5 C8,4.11928813 9.11928813,3 10.5,3 L16.4720225,3 C16.6047688,2.99158053 16.7429463,3.03583949 16.8535534,3.14644661 L19.8535534,6.14644661 C19.9641605,6.25705373 20.0084195,6.39523125 20,6.52797748 Z M17,6 L18.2928932,6 L17,4.70710678 L17,6 Z M11.5,13 C11.2238576,13 11,12.7761424 11,12.5 C11,12.2238576 11.2238576,12 11.5,12 L13.5,12 C13.7761424,12 14,12.2238576 14,12.5 C14,12.7761424 13.7761424,13 13.5,13 L11.5,13 Z M11.5,11 C11.2238576,11 11,10.7761424 11,10.5 C11,10.2238576 11.2238576,10 11.5,10 L16.5,10 C16.7761424,10 17,10.2238576 17,10.5 C17,10.7761424 16.7761424,11 16.5,11 L11.5,11 Z M11.5,9 C11.2238576,9 11,8.77614237 11,8.5 C11,8.22385763 11.2238576,8 11.5,8 L16.5,8 C16.7761424,8 17,8.22385763 17,8.5 C17,8.77614237 16.7761424,9 16.5,9 L11.5,9 Z"/>
     </svg>
      Copy Link
    </button>
  </div>

  <img
  *ngIf="post?.coverImage"
  [src]="post.coverImage"
  class="rounded-xl shadow w-full mb-6 object-cover h-48 sm:h-64 lg:h-80"
/>


  <!-- CONTENT -->
  <div class="prose prose-sm sm:prose-base lg:prose-lg max-w-none mb-10 text-gray-800">
    {{ post?.content }}
  </div>

  <!-- COMMENTS -->
  <div class="mb-10">
    <app-comment-section></app-comment-section>
  </div>

  <div *ngIf="relatedPosts.length" class="mt-10">
    <h2 class="text-lg sm:text-xl font-semibold mb-6">
      Related Posts
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

      <div
        *ngFor="let related of relatedPosts"
        (click)="viewPost(related.id)"
        class="cursor-pointer bg-white border border-blue-200 rounded-lg shadow hover:shadow-lg transition overflow-hidden">

        <div class="relative">
         <img
         [src]="related.image || 'assets/default.jpg'"
         [alt]="related.title"
         class="w-full h-40 object-cover" />

          <span
            class="absolute top-2 left-2 px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">
            {{ related.category || 'News' }}
          </span>
        </div>

        <div class="p-4">
          <h3 class="font-semibold text-base text-gray-800 mb-2 leading-tight line-clamp-2">
            {{ related.title }}
          </h3>

          <p class="text-gray-600 text-xs mb-3 line-clamp-2">
            {{ related.description | slice: 0:80 }}...
          </p>

          <div class="border-b mb-3"></div>

          <div class="text-xs text-gray-500 flex justify-between">
            <span class="font-medium">{{ related.author }}</span>
            <span>{{ related.date }}</span>
          </div>
        </div>

      </div>

    </div>
  </div>

</div>

<!-- LOADING TEMPLATE -->
<ng-template #loadingTemplate>
  <div class="max-w-4xl mx-auto px-4 py-10">
    <div class="text-center text-gray-600 py-20">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
      <p class="text-base">Loading post...</p>
    </div>
  </div>
</ng-template>
